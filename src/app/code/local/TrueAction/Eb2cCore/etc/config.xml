<?xml version="1.0" encoding="utf-8"?>
<config>
	<modules>
		<TrueAction_Eb2cCore>
			<version>0.9.0</version>
		</TrueAction_Eb2cCore>
	</modules>
	<global>
		<models>
			<eb2ccore>
				<class>TrueAction_Eb2cCore_Model</class>
			</eb2ccore>
		</models>
		<helpers>
			<eb2ccore>
				<class>TrueAction_Eb2cCore_Helper</class>
			</eb2ccore>
		</helpers>
		<events>
			<sales_quote_collect_totals_before>
				<observers>
					<eb2ccore_update_quote_session>
						<class>TrueAction_Eb2cCore_Model_Observer</class>
						<method>checkQuoteForChanges</method>
						<type>singleton</type>
					</eb2ccore_update_quote_session>
				</observers>
			</sales_quote_collect_totals_before>
		</events>
	</global>
	<crontab>
		<jobs>
			<eb2cinventory_feed_item_inventories>
				<schedule>
					<cron_expr>*/15 * * * *</cron_expr>
				</schedule>
				<run>
					<model>eb2cinventory/feed_item_inventories::processFeeds</model>
				</run>
			</eb2cinventory_feed_item_inventories>
			<eb2cproduct_feed>
				<schedule>
					<cron_expr>*/15 * * * *</cron_expr>
				</schedule>
				<run>
					<model>eb2cproduct/feed::processFeeds</model>
				</run>
			</eb2cproduct_feed>
		</jobs>
	</crontab>
	<default>
		<eb2ccore>
			<general>
				<catalog_id/>
				<client_customer_id_prefix/>
				<client_id/>
				<client_order_id_prefix/>
				<language_code/>
				<store_id/>
			</general>
			<api>
				<hostname></hostname>
				<key backend_model="adminhtml/system_config_backend_encrypted"/>
				<major_version>1</major_version>
				<minor_version>0</minor_version>
				<region>na</region>
				<timeout/>
				<xml_namespace><![CDATA[http://api.gsicommerce.com/schema/checkout/1.0]]></xml_namespace>
				<xsd_path><![CDATA[app/code/local/TrueAction/Eb2cCore/xsd]]></xsd_path>
			</api>
			<feed>
				<destination_type>MAILBOX</destination_type>
				<filetransfer_protocol>sftp</filetransfer_protocol>
				<filetransfer_sftp_auth_type>pub_key</filetransfer_sftp_auth_type>
				<import_archive>Feed/archive/import</import_archive>
				<export_archive>Feed/archive/export</export_archive>
				<available_models>
					<eb2cinventory>
						<feed_item_inventories>1</feed_item_inventories>
					</eb2cinventory>
					<eb2corder>
						<status_feed>1</status_feed>
					</eb2corder>
					<eb2cproduct>
						<feed>1</feed>
					</eb2cproduct>
				</available_models>
				<filetransfer_exports>
					<acknowledgments>
						<local_directory>Feed/outbox/ack</local_directory>
						<remote_directory>remote/inbox</remote_directory>
						<sent_directory>Feed/archive/export/ack</sent_directory>
					</acknowledgments>
					<product>
						<local_directory>Feed/outbox/product</local_directory>
						<remote_directory>remote/inbox</remote_directory>
						<sent_directory>Feed/sent/product</sent_directory>
					</product>
				</filetransfer_exports>
				<filetransfer_imports>
					<acknowledgments>
						<local_directory>Feed/inbox/ack</local_directory>
						<remote_directory>remote/outbox</remote_directory>
						<file_pattern>*Ack*.xml</file_pattern>
					</acknowledgments>
					<product>
						<local_directory>Feed/inbox/product</local_directory>
						<remote_directory>remote/outbox</remote_directory>
						<file_pattern>*ItemMaster*.xml</file_pattern>
					</product>
					<inventory>
						<local_directory>Feed/inbox/inventory</local_directory>
						<remote_directory>remote/outbox</remote_directory>
						<file_pattern>*Inventory*.xml</file_pattern>
					</inventory>
				</filetransfer_imports>
				<outbound>
					<message_header>
						<standard>GSI</standard>
						<header_version>2.3.0</header_version>
						<version_release_number>2.3.0</version_release_number>
						<destination_id>MWS</destination_id>
						<destination_type>WS</destination_type>
						<source_id>
							<type>helper</type>
							<class>eb2ccore/feed</class>
							<method>getStoreId</method>
						</source_id>
						<source_type>
							<type>helper</type>
							<class>eb2ccore/feed</class>
							<method>getClientId</method>
						</source_type>
						<message_id>
							<type>helper</type>
							<class>eb2ccore/feed</class>
							<method>getMessageId</method>
						</message_id>
						<correlation_id>
							<type>helper</type>
							<class>eb2ccore/feed</class>
							<method>getCorrelationId</method>
						</correlation_id>
						<create_date_and_time>
							<type>helper</type>
							<class>eb2ccore/feed</class>
							<method>getCreatedDateTime</method>
						</create_date_and_time>
					</message_header>
					<file_name>
						<time_stamp>
							<type>helper</type>
							<class>eb2ccore/feed</class>
							<method>getTimeStamp</method>
						</time_stamp>
						<client_id>
							<type>helper</type>
							<class>eb2ccore/feed</class>
							<method>getClientId</method>
						</client_id>
						<catalog_id>
							<type>helper</type>
							<class>eb2ccore/feed</class>
							<method>getCatalogId</method>
						</catalog_id>
						<store_id>
							<type>helper</type>
							<class>eb2ccore/feed</class>
							<method>getStoreId</method>
						</store_id>
					</file_name>
				</outbound>
				<error_confirmation_feed>
					<file_pattern>{client_id}_{catalog_id}_{store_id}_errorconfirmation_{feed_type}_{time_stamp}.xml</file_pattern>
					<remote_mailbox>/</remote_mailbox>
				</error_confirmation_feed>
				<header_template><![CDATA[<MessageHeader>
		<Standard>{standard}</Standard>
		<HeaderVersion>{header_version}</HeaderVersion>
		<VersionReleaseNumber>{version_release_number}</VersionReleaseNumber>
		<SourceData>
			<SourceId>{source_id}</SourceId>
			<SourceType>{source_type}</SourceType>
		</SourceData>
		<DestinationData>
			<DestinationId>{destination_id}</DestinationId>
			<DestinationType>{destination_type}</DestinationType>
		</DestinationData>
		<EventType>{event_type}</EventType>
		<MessageData>
			<MessageId>{message_id}</MessageId>
			<CorrelationId>{correlation_id}</CorrelationId>
		</MessageData>
		<CreateDateAndTime>{create_date_and_time}</CreateDateAndTime>
	</MessageHeader>]]></header_template>
				<acknowledgement>
					<remote_path>/</remote_path>
					<filename_pattern>ack_{eventtype}_{clientid}_{storeid}_{timestamp}.xml</filename_pattern>
					<timestamp_format>YmdHis</timestamp_format>
					<xsd>AcknowledgementV11.xsd</xsd>
				</acknowledgement>
			</feed>
			<service>
				<order>
					<timeout>15</timeout>
				</order>
				<payment>
					<timeout>17</timeout>
				</payment>
				<inventory>
					<expiration>15</expiration>
				</inventory>
			</service>
		</eb2ccore>
	</default>
	<phpunit>
		<suite>
			<modules>
				<TrueAction_Eb2cCore/>
			</modules>
		</suite>
	</phpunit>
</config>
